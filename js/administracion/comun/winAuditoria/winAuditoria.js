/*
 * File: winAuditoria.js
 * Date: Tue Jul 23 2019 21:19:17 GMT-0600 (Mountain Daylight Time (Mexico))
 * 
 * This file was generated by Ext Designer version 1.1.2.
 * http://www.sencha.com/products/designer/
 *
 * This file will be generated the first time you export.
 *
 * You should implement event handling and custom methods in this
 * class.
 */
Ext.ns('miErpWeb');
Ext.ns('mew');
winAuditoria = Ext.extend(winAuditoriaUi, {
	IdRegistro:0,
	IDModulo:0,
	inicializaEventos: function(){
		
		this.on('afterrender', function(){			
			this.getAuditoria();
		}, this);	
		
		this.btnAceptar.on('click', function(){
			this.close();
		}, this);
		
		
	},
	getAuditoria: function(){
		var idReg = this.IdRegistro;
		var modulo = this.IDModulo;
		
		Ext.Ajax.request({
			scope:this,
			params:{
				id:idReg,
				id_modulo:modulo
			},
		   url: 'app.php/sistema/getAuditoria',
		   success: function(response, opts){
				//Solicita el PDF
				var obj = Ext.decode(response.responseText);
				if (!obj.success){	//Prosegir solo en caso de exito
					return;
				}
				
				var auditoria=obj.data.Auditoria;
				
				console.log(auditoria);
				//var fechaMov=obj.data[0].fecha_venta;
	
				//var dt = Date.parseDate(fechaMov, "d/m/Y H:i:s");
				   
				//this.txtFecha.setValue(dt);
				//this.txtHora.setValue(dt.format('H:i:s A'));
				
			
				this.doLayout();
												
			},
		   failure: function(){
				alert("El servidor ha respondido con un mensaje de error");
			}						   
		   
		});
	},
    initComponent: function() {
        winAuditoria.superclass.initComponent.call(this);
		
		this.inicializaEventos();
    }
});
Ext.reg('winAuditoria', winAuditoria);